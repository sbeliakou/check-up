name: Simple Test 2
cases:

- script: >
    docker run -d --name test-server --volume $(pwd):$(pwd) --workdir $(pwd) --privileged quay.io/sbeliakou/ansible-training:centos

- case: Creating test-user in test container
  script: |
    run docker exec test-server useradd test-user
    assert_success

- case: Check if test-user exists
  script: |
    run docker exec test-server id test-user
    assert_success

# Obviously, it shouldn't, but let's check
- case: Check if "unwilling-user" exists
  script: |
    run docker exec test-server id unwilling-user
    assert_success

- case: Creating "unwilling-user"
  script: |
    run docker exec test-server id unwilling-user
    assert_failure

- script: docker rm -f test-server
